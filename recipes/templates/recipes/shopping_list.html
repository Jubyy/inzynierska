<h2>Lista zakupów dla przepisu: {{ recipe.name }}</h2>

{% if shopping_list %}
    <ul id="shoppingList">
        {% for item in shopping_list %}
            <li>{{ item }}</li>
        {% endfor %}
    </ul>
    <button onclick="copyToClipboard()">Skopiuj do schowka</button>
    <a href="{% url 'generate_shopping_list_pdf' recipe.id %}">Pobierz jako PDF</a>
{% else %}
    <p>Masz wszystkie składniki – nie musisz nic kupować!</p>
{% endif %}

<a href="{% url 'recipe_list' %}">Wróć do listy przepisów</a>

<script>
function copyToClipboard() {
    const listItems = document.querySelectorAll('#shoppingList li');
    const itemsText = Array.from(listItems).map(item => item.innerText).join('\n');
    navigator.clipboard.writeText(itemsText).then(() => {
        alert('Lista zakupów skopiowana do schowka!');
    }).catch(err => {
        alert('Coś poszło nie tak przy kopiowaniu.');
    });
}
</script>
