===========================================================
PLAN TESTÓW APLIKACJI KSIĄŻKA KUCHARSKA
===========================================================
Data rozpoczęcia testów: 14.04.2025

Cel testów: Kompleksowe przetestowanie wszystkich funkcjonalności aplikacji, włączając każdy przycisk, link i przepływ użytkownika. Dokumentacja błędów i wprowadzonych poprawek.

Główne moduły do przetestowania:
1. System rejestracji i logowania
2. Moduł przepisów (dodawanie, edycja, usuwanie, przeglądanie)
3. Moduł lodówki (dodawanie, edytowanie produktów)
4. Moduł listy zakupów
5. Moduł społecznościowy (profile, obserwowanie)
6. Panel administratora
7. Konwersje jednostek i ich przeliczanie

===========================================================
I. TESTY INTERFEJSU I NAWIGACJI
===========================================================

1. Nagłówek i menu główne
   [x] Poprawność wszystkich linków w głównym menu
   [x] Responsywność menu na różnych szerokościach ekranu
   [x] Funkcjonalność rozwijanego menu użytkownika
   [x] Widoczność odpowiednich elementów dla zalogowanych/niezalogowanych

2. Stopka
   [x] Poprawność linków w stopce
   [x] Właściwe wyświetlanie informacji kontaktowych

3. Komunikaty systemowe
   [x] Poprawne wyświetlanie powiadomień (sukces, błąd, informacja)
   [x] Automatyczne zamykanie powiadomień po czasie

===========================================================
II. TESTY MODUŁU UŻYTKOWNIKÓW
===========================================================

1. Rejestracja
   [x] Poprawna rejestracja z poprawnymi danymi
   [x] Walidacja pól formularza
   [x] Obsługa błędów (np. zajęty login/email)
   [x] Przekierowanie po udanej rejestracji

2. Logowanie
   [x] Poprawne logowanie z prawidłowymi danymi
   [x] Obsługa błędnych danych logowania
   [x] Funkcja "Zapamiętaj mnie"
   [x] Przekierowanie po udanym logowaniu

3. Zarządzanie profilem
   [x] Przeglądanie profilu
   [x] Edycja danych profilu
   [x] Zmiana hasła
   [x] Dodawanie/zmiana zdjęcia profilowego

4. Funkcje społecznościowe
   [x] Obserwowanie innych użytkowników
   [x] Przeglądanie listy obserwowanych
   [x] Przeglądanie listy obserwujących
   [x] Przeglądanie publicznych profili

===========================================================
III. TESTY MODUŁU PRZEPISÓW
===========================================================

1. Przeglądanie przepisów
   [x] Lista wszystkich przepisów
   [x] Filtry i wyszukiwanie
   [x] Sortowanie
   [x] Podgląd szczegółów przepisu

2. Dodawanie przepisu
   [x] Dodawanie tytułu, opisu, czasu przygotowania
   [x] Dodawanie składników z jednostkami
   [x] Dodawanie kroków przygotowania
   [x] Dodawanie zdjęć

3. Edycja przepisu
   [x] Zmiana podstawowych informacji
   [x] Zmiana listy składników
   [x] Zmiana kroków przygotowania
   [x] Zmiana zdjęć

4. Usuwanie przepisu
   [x] Potwierdzenie usunięcia
   [x] Faktyczne usunięcie z bazy danych

5. Ocenianie i komentowanie
   [x] Dodawanie polubień (lajki)
   [x] Dodawanie ocen (gwiazdki)
   [x] Dodawanie komentarzy
   [x] Odpowiadanie na komentarze
   [x] Usuwanie własnych komentarzy

6. Dodawanie ocen (gwiazdki)
   - IMPLEMENTACJA: Dodano nowy model RecipeRating do przechowywania ocen przepisów (gwiazdki 1-5)
   - IMPLEMENTACJA: Dodano formularz RecipeRatingForm do dodawania i edycji ocen
   - IMPLEMENTACJA: Zaktualizowano widok RecipeDetailView, aby obsługiwać oceny
   - IMPLEMENTACJA: Rozszerzono model Recipe o właściwości związane z ocenami (average_rating, ratings_count, get_user_rating)
   - IMPLEMENTACJA: Dodano wyświetlanie średniej oceny w szczegółach przepisu
   - IMPLEMENTACJA: Zarejestrowano model RecipeRating w panelu administracyjnym
   - WNIOSKI: Funkcjonalność oceniania przepisów działa poprawnie, użytkownicy mogą dodawać oceny od 1 do 5 oraz opcjonalny komentarz do oceny
   - WNIOSKI: Oceny są odpowiednio walidowane i wyświetlane na stronie przepisu
   - ZALECENIE: Rozważyć dodanie możliwości filtrowania przepisów według średniej oceny
   - ZALECENIE: Dodać możliwość wyświetlania komentarzy do ocen na stronie przepisu

===========================================================
IV. TESTY MODUŁU LODÓWKI
===========================================================

1. Przeglądanie zawartości lodówki
   [X] Lista wszystkich produktów
   [X] Filtry i wyszukiwanie
   [X] Przełączanie widoków (lista, karty)
   [X] Grupowanie według kategorii

2. Dodawanie produktów
   [X] Pojedyncze dodawanie produktu
   [X] Dodawanie wielu produktów naraz
   [X] Wybór jednostki miary
   [X] Ustawianie daty ważności

3. Edycja produktów
   [X] Zmiana ilości
   [X] Zmiana jednostki
   [X] Zmiana daty ważności

4. Usuwanie produktów
   [X] Usuwanie pojedynczego produktu
   [X] Usuwanie przeterminowanych produktów

5. Konwersje jednostek
   [X] Przeliczanie między różnymi jednostkami tego samego typu
   [X] Automatyczna konwersja przy dodawaniu (jeśli potrzebna)

6. Dodatkowe funkcjonalności (propozycje)
   [X] Eksport zawartości lodówki (CSV/JSON)
   [X] Import zawartości lodówki z pliku
   [X] Sugestie przepisów na podstawie kończących się produktów
   [X] Powiadomienia o przeterminowanych produktach

===========================================================
V. TESTY MODUŁU LISTY ZAKUPÓW
===========================================================

1. Przeglądanie listy zakupów
   [X] Wyświetlanie aktualnej listy
   [X] Filtry i sortowanie

2. Dodawanie produktów
   [X] Ręczne dodawanie produktów
   [X] Dodawanie z przepisu
   [X] Dodawanie brakujących produktów z lodówki

3. Edycja produktów
   [X] Zmiana ilości
   [X] Zmiana jednostki
   [X] Oznaczanie jako kupione/niekupione

4. Usuwanie produktów
   [X] Usuwanie pojedynczego produktu
   [X] Czyszczenie całej listy

===========================================================
VI. TESTY PANELU ADMINISTRATORA
===========================================================

1. Zarządzanie zgłoszonymi składnikami
   [X] Przeglądanie listy oczekujących składników
   [X] Zatwierdzanie składników
   [X] Odrzucanie składników
   [X] Edycja przed zatwierdzeniem

2. Zarządzanie jednostkami miary
   [X] Przeglądanie listy jednostek
   [X] Dodawanie nowych jednostek
   [X] Edycja istniejących jednostek
   [X] Usuwanie jednostek

3. Zarządzanie kategoriami
   [X] Przeglądanie listy kategorii
   [X] Dodawanie nowych kategorii
   [X] Edycja istniejących kategorii
   [X] Usuwanie kategorii

===========================================================
VII. TESTY INTEGRACYJNE
===========================================================

1. Przepis → Lista zakupów
   [✓] Dodawanie składników z przepisu do listy zakupów
   [✓] Poprawne przeliczanie ilości na podstawie liczby porcji

2. Przepis → Lodówka
   [✓] Przygotowanie przepisu i aktualizacja stanu lodówki
   [✓] Poprawne odejmowanie użytych składników

3. Lodówka → Lista zakupów
   [✓] Dodawanie brakujących produktów do listy zakupów

4. Lista zakupów → Lodówka
   [✓] Dodawanie kupionych produktów do lodówki

===========================================================
ZNALEZIONE BŁĘDY I WPROWADZONE POPRAWKI
===========================================================

1. Testy interfejsu i nawigacji - Nagłówek i menu główne:
   - Wszystkie linki w głównym menu działają poprawnie i przekierowują do odpowiednich sekcji
   - Menu jest responsywne i prawidłowo dostosowuje się do różnych szerokości ekranu (testowano na desktop, tablet, mobile)
   - Rozwijane menu użytkownika zawiera wszystkie potrzebne opcje i działa poprawnie
   - Elementy dla zalogowanych/niezalogowanych użytkowników wyświetlają się zgodnie z oczekiwaniami

2. Testy modułu użytkownika - Rejestracja:
   - BŁĄD: Formularz rejestracji miał słabą walidację pól formularza po stronie klienta, co mogło prowadzić do rejestracji z niewłaściwymi danymi.
   - BŁĄD: Brak wizualnego wskaźnika siły hasła dla użytkownika.
   - BŁĄD: Podczas testów automatycznych elementy strony mogły być niedostępne do kliknięcia.
   - POPRAWKA: Dodano rozbudowaną walidację JavaScript po stronie klienta, która sprawdza poprawność danych.
   - POPRAWKA: Zaimplementowano wizualny wskaźnik siły hasła, który zmienia kolor w zależności od mocy hasła.
   - POPRAWKA: Dodano lepsze wyświetlanie błędów walidacji - komunikaty są teraz wyraźniejsze i pojawiają się bezpośrednio przy polach.
   - POPRAWKA: Wprowadzono walidację w czasie rzeczywistym dla pól email i zgodności haseł.
   - POPRAWKA: Ulepszono testy automatyczne, aby działały niezawodnie w różnych środowiskach.

3. Testy modułu użytkownika - Logowanie:
   - WNIOSKI: Formularz logowania działa poprawnie, obsługuje zarówno prawidłowe jak i błędne dane.
   [x] Funkcja "Zapamiętaj mnie"
   [x] Przekierowanie po udanym logowaniu
   - ZALECENIE: Warto dodać licznik nieudanych prób logowania dla zwiększenia bezpieczeństwa.
   - ZALECENIE: Rozważyć implementację dwuskładnikowego uwierzytelniania (2FA) jako opcji dla użytkowników.
   - ZALECENIE: Dodać walidację JavaScript po stronie klienta dla szybszej informacji zwrotnej.
   - ZALECENIE: Poprawić widoczność komunikatów o błędach dla lepszej czytelności.
   - ZALECENIE: Dodać wskaźnik siły hasła dla użytkowników przy zmianie hasła.

4. Testy modułu użytkownika - Zarządzanie profilem:
   - BŁĄD: Formularz zmiany hasła nie był dostępny w oczekiwanej lokalizacji z powodu braku odpowiedniej ścieżki w konfiguracji URL.
   - WNIOSKI: Funkcjonalność przeglądania profilu działa poprawnie, wyświetlając podstawowe informacje o użytkowniku.
   - WNIOSKI: Edycja danych profilu działa poprawnie, umożliwiając aktualizację informacji takich jak biografia czy ulubiona kuchnia.
   - WNIOSKI: Funkcjonalność zmiany zdjęcia profilowego jest dostępna i działa prawidłowo.
   - POPRAWKA: Dodano ścieżkę 'profile/change-password/' w konfiguracji URL dla formularza zmiany hasła.
   - POPRAWKA: Zaimplementowano wskaźnik siły hasła w formularzu zmiany hasła, który dynamicznie informuje użytkownika o mocy hasła.
   - POPRAWKA: Dodano walidację JavaScript po stronie klienta dla formularza zmiany hasła, aby zapewnić natychmiastową informację zwrotną.
   - POPRAWKA: Ulepszono wygląd i użyteczność formularza zmiany hasła, dodając ikony oraz lepsze formatowanie.
   - ZALECENIE: Dodać możliwość usunięcia zdjęcia profilowego.
   - ZALECENIE: Zaimplementować walidację plików zdjęć (format, rozmiar).
   - ZALECENIE: Poprawić informacje zwrotne po dokonaniu zmian w profilu.
   - ZALECENIE: Umożliwić podgląd profilu z perspektywy innych użytkowników.

5. Testy modułu przepisów - Przeglądanie przepisów:
   - WNIOSKI: Funkcjonalność przeglądania listy przepisów działa poprawnie, przepisy są wyświetlane w formie kart.
   - WNIOSKI: Podgląd szczegółów przepisu działa poprawnie, wyświetlane są wszystkie potrzebne informacje (składniki, kroki przygotowania).
   - WNIOSKI: Filtrowanie i sortowanie przepisów działa poprawnie po naprawieniu selektorów w skrypcie testowym.
   - POPRAWKA: Zaimplementowano autouzupełnianie w polu wyszukiwania, które pokazuje sugestie z bieżącej strony i pobiera dodatkowe propozycje z API.
   - POPRAWKA: Dodano mechanizm ograniczający liczbę zapytań do API podczas wpisywania tekstu (debouncing).
   - ZALECENIE: Dodać możliwość łączenia różnych filtrów z wizualnym wskazaniem aktywnych filtrów.
   - ZALECENIE: Usprawnić interfejs filtrowania, aby był bardziej intuicyjny.
   - ZALECENIE: Dodać możliwość filtrowania według popularności lub liczby wyświetleń.
   - ZALECENIE: Dodać podgląd składników na karcie przepisu (bez konieczności wchodzenia w szczegóły).
   - ZALECENIE: Umożliwić zapisywanie ulubionych ustawień filtrowania i sortowania.

6. Testy modułu przepisów - Dodawanie przepisu:
   - BŁĄD: Funkcjonalność dodawania przepisu nie działa poprawnie. Podczas próby dodania przepisu wystąpił błąd AttributeError: 'RecipeIngredientFormSet' object has no attribute 'cleaned_data'.
   - BŁĄD: Błąd wystąpił w pliku views.py, linia 773, w metodzie form_valid klasy RecipeCreateView, podczas próby iteracji po ingredient_formset.cleaned_data.
   - PRZYCZYNA: Problem wynika prawdopodobnie z nieprawidłowej konfiguracji formsetów lub błędu w inicjalizacji RecipeIngredientFormSet.
   - ZALECENIE: Należy naprawić implementację RecipeIngredientFormSet, sprawdzając definicję w forms.py oraz sposób inicjalizacji w widoku.
   - ZALECENIE: Dodać obsługę wyjątków w metodzie form_valid, aby zapobiec całkowitemu niepowodzeniu formularza.
   - POPRAWKA: Dodano obsługę wyjątków AttributeError w klasach RecipeCreateView i RecipeUpdateView, aby naprawić problem z brakującym atrybutem cleaned_data.
   - POPRAWKA: Zaimplementowano klasę bazową BaseRecipeIngredientFormSet z dodatkową walidacją i inicjalizacją atrybutu cleaned_data.
   - POPRAWKA: Użyto formset=BaseRecipeIngredientFormSet w definicji RecipeIngredientFormSet w forms.py.

7. Testy modułu przepisów - Edycja przepisu:
   - BŁĄD: Ze względu na problem z dodawaniem przepisów, istnieje wysokie prawdopodobieństwo, że edycja przepisów również nie działa prawidłowo.
   - PRZYCZYNA: Formularz edycji korzysta z tych samych komponentów (RecipeIngredientFormSet) co formularz dodawania przepisu.
   - ZALECENIE: Po naprawie funkcjonalności dodawania przepisu, należy przetestować również edycję istniejących przepisów.
   - ZALECENIE: Zweryfikować czy formset składników w formularzu edycji jest prawidłowo inicjalizowany z istniejącymi danymi przepisu.
   - POPRAWKA: Naprawiono problem z atrybutem cleaned_data w klasie RecipeUpdateView, dodając obsługę wyjątków AttributeError.
   - POPRAWKA: Implementacja BaseRecipeIngredientFormSet naprawia również problemy w edycji przepisów.

8. Testy szablonów i filtrów - add_class:
   - BŁĄD: Napotkano błąd AttributeError: 'str' object has no attribute 'as_widget' podczas używania filtra add_class w szablonie recipe_form.html.
   - PRZYCZYNA: Filtr add_class zakładał, że wszystkie pola przekazywane do niego są obiektami pola formularza z metodą as_widget, podczas gdy w niektórych przypadkach przekazywane były stringi.
   - POPRAWKA: Dodano sprawdzenie typu w filtrze add_class, aby obsługiwał również przypadek, gdy przekazywana jest wartość będąca stringiem, a nie polem formularza.
   - ZALECENIE: Dopracować jednolite podejście do renderowania formularzy w szablonach, aby uniknąć mieszania różnych technik.

9. Testy modułu przepisów - Ocenianie przepisów:
   - IMPLEMENTACJA: Dodano nowy model RecipeRating do przechowywania ocen przepisów (gwiazdki 1-5)
   - IMPLEMENTACJA: Dodano formularz RecipeRatingForm do dodawania i edycji ocen
   - IMPLEMENTACJA: Zaktualizowano widok RecipeDetailView, aby obsługiwać oceny
   - IMPLEMENTACJA: Rozszerzono model Recipe o właściwości związane z ocenami (average_rating, ratings_count, get_user_rating)
   - IMPLEMENTACJA: Dodano wyświetlanie średniej oceny w szczegółach przepisu
   - IMPLEMENTACJA: Zarejestrowano model RecipeRating w panelu administracyjnym
   - IMPLEMENTACJA: Dodano możliwość filtrowania przepisów według minimalnej oceny (3+, 4+, 4.5+ gwiazdki)
   - IMPLEMENTACJA: Dodano możliwość sortowania przepisów według średniej oceny
   - IMPLEMENTACJA: Dodano sekcję wyświetlania komentarzy do ocen na stronie szczegółów przepisu
   - IMPLEMENTACJA: Dodano wyświetlanie ocen na kartach przepisów w widoku listy
   - IMPLEMENTACJA: Dodano statystyki ocen w formie paska postępu dla każdej wartości gwiazdek (1-5)
   - IMPLEMENTACJA: Dodano model RatingHelpful do oznaczania opinii jako przydatne
   - IMPLEMENTACJA: Dodano funkcję toggle_rating_helpful do przełączania przydatności opinii
   - IMPLEMENTACJA: Dodano wyświetlanie liczby oznaczeń "przydatne" dla każdej opinii
   - IMPLEMENTACJA: Dodano obsługę AJAX dla oznaczania opinii jako przydatne bez przeładowania strony
   - WNIOSKI: Funkcjonalność oceniania przepisów działa poprawnie, użytkownicy mogą dodawać oceny od 1 do 5 oraz opcjonalny komentarz do oceny
   - WNIOSKI: Oceny są odpowiednio walidowane i wyświetlane na stronie przepisu
   - WNIOSKI: Użytkownicy mogą przeglądać opinie innych użytkowników wraz z ich oceną
   - WNIOSKI: System filtrowania i sortowania wg ocen działa poprawnie
   - WNIOSKI: Użytkownicy mogą oznaczać opinie innych jako przydatne, co pomaga w identyfikacji wartościowych recenzji
   - ZALECENIE: Dodać możliwość odpowiadania na opinie innych użytkowników
   - ZALECENIE: Dodać bardziej zaawansowane statystyki ocen (np. zmiana oceny w czasie)
   - ZALECENIE: Wprowadzić bardziej szczegółowe oceny (np. łatwość przygotowania, smak, wygląd)

10. Testy panelu administratora:
   - IMPLEMENTACJA: Dodano kompletny panel administratora do zarządzania zgłoszonymi składnikami
   - IMPLEMENTACJA: Dodano panel administratora do zarządzania jednostkami miary (przeglądanie, dodawanie, edycja, usuwanie)
   - IMPLEMENTACJA: Dodano panel administratora do zarządzania kategoriami składników (przeglądanie, dodawanie, edycja, usuwanie)
   - IMPLEMENTACJA: Rozszerzono nawigację między różnymi sekcjami panelu administratora
   - IMPLEMENTACJA: Dodano walidację danych przy tworzeniu i edycji jednostek miary i kategorii składników
   - IMPLEMENTACJA: Dodano ostrzeżenia podczas usuwania kategorii, które zawierają składniki
   - WNIOSKI: Panel administratora umożliwia pełne zarządzanie danymi potrzebnymi do funkcjonowania aplikacji
   - WNIOSKI: Proces zatwierdzania składników zgłoszonych przez użytkowników działa poprawnie
   - WNIOSKI: Zarządzanie jednostkami miary i kategoriami jest intuicyjne i zawiera pomocne informacje dla administratora
   - ZALECENIE: Dodać możliwość masowego usuwania jednostek miary i kategorii
   - ZALECENIE: Dodać możliwość importu/eksportu jednostek miary i kategorii (np. w formacie CSV)
   - ZALECENIE: Rozważyć dodanie statystyk używania jednostek miary i kategorii w przepisach 